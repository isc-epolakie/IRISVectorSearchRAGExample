Settings in All Business Operations
Provides reference information for settings that are available in all business operations. You can configure these settings after you have added a business operation to your production.
Summary
All business operations have the following settings:

Group	Settings	Notes
Informational Settings	Comment, Category, Class Name, Description, Adapter Class Name, Adapter Description, Business Partner	See these settings for business services
Basic Settings	Enabled	 
FIFO Message Grouping	Group Calculation, Group Completion Hosts	See Maintaining First-In First-Out (FIFO) Processing
Additional Settings	Schedule, Pool Size	See these settings for business services
Additional Settings	Reply Code Actions	See this setting for business processes
Additional Settings	Retry Interval, Failure Timeout	 
Additional Settings	SendSuperSession	 
Additional Settings	Throttle Delay	See this setting for business services
Alerting Control	Alert Retry Grace Period	 
Alerting Control	Queue Count Alert, Queue Wait Alert	See these settings for business processes
Alerting Control	Alert On Error, Inactivity Timeout	See these settings for business services
Development and Debugging	Foreground, Log Trace Events, Archive IO	See these settings for business services

Comment
An optional text description.

Category
Common to all business hosts. An optional text label that you can use to visually group business hosts within the production diagram. Category names are case-sensitive and can contain space characters.

The Category drop-down list contains all the categories that are used in the current production. Specify this setting as follows:

To specify one category, either type the category name or select it from the Category drop-down list. If you type a category name and it does not yet exist, InterSystems IRIS creates it.

To specify multiple categories, select the check box for each desired category from the Category drop-down list. Or type a comma-separated list of categories.

To delete a category, remove that category selection from all business hosts that use it. If the Category drop-down list still displays the category, that means that the category is still in use. In this case, filter the display to show only business hosts that use that category. Then for each of the business hosts that you see, edit the Category to remove the category.

Class Name
Common to all business hosts. The business host class name. This field is read-only.

Adapter Class Name
Common to business services and business operations. The class name for the inbound adapter associated with this business host, if any. This field is read-only and is determined by the business host class definition.

Adapter Description
Common to business services and business operations. Comments that describe the adapter class. This field is read-only and displays the first line of the class annotation in the code.

Description
Common to all business hosts. Comments that describe the business host class. This field is read-only and displays the first line of the class annotation in the code.

Business Partner
Common to all business hosts. Specifies an optional business partner applicable to this business host. Select a business host profile, if available.

A business partner profile is information about an organization or application connected to your InterSystems IRIS system. For each business partner, you can provide information such as the partner name, notes, primary and alternative contacts, and contact details. Defining a profile has no effect on the behavior or running of the production. It simply gives you a means to store more information.

For example, suppose your production talks to ABC Hospital and XYZ Hospital. You can enter profiles for both of these along with contact information. When you configure items that communicate with these organizations, you can specify the defined business partner for each business host.

For information on defining these profiles, see Configuring Business Partners.

Enabled
Common to all business hosts. Enables the business host, so that it processes messages whenever the production runs. You can also double-click a business host in the diagram to toggle between enabling and disabling it.

When the Enabled check box is clear, the business host is still present in the configuration, and its queue continues to accept messages, but none of these messages are processed until the business host is enabled again.

This setting is useful, for example, if there is a communications breakdown on the external side. For example, if an email server goes down, or something similar happens, you can disable the associated business service until throughput is restored.

The Enabled check box is a setting stored in the production class definition. If the production is read-only due to being managed by source control, you cannot change this setting unless you have checked the production out of source control. If the production is in source control, you can manage the item using the Stop, Start, and Restart bu

Schedule
Common to all business hosts. An optional command string that schedules stop and start times for the business host. The string is a comma-separated list of event specifications, each of which has the following format:

action:YYYY-MM-DDThh:mm:ss

Where action is either START or STOP to indicate the desired event. Type a schedule string or select an existing schedule specification.

For details on the schedule string, see Configuring Schedule Specifications.

Pool Size
Common to all business hosts. Specifies how many system jobs to allocate to run this business host.

Notes specific to business services:

For business services, the default is 1.

You must use a value of 0 if the business service is being invoked via the Ens.DirectorOpens in a new tab method CreateBusinessService(); this is called an adapterless business service.

You may use a value greater than 1 with File or FTP inbound adapters if you want multiple jobs competing to pull files from the same input directory, or if you have a TCP Service configured with an exclamation point (!) to make it initiate the connection.

For a full discussion of appropriate pool sizes, see Pool Size and Actor Pool Size.

Alert Retry Grace Period
Common to business processes and operations. Specifies an optional grace period during which errors relating to external connections do not trigger alerts (even if Alert On Error is True).

If the error condition still exists after the alert period expires, the business operation triggers an alert; otherwise no alert is triggered.

Business services have a similar setting.

Reply Code Actions
Common to business processes and business operations. Specifies one or more rules that specify what the business host should do on receipt of various reply status conditions, particularly error conditions. Specify a comma-separated list of code-action pairs.

Important:
Independent of the value of this setting, the adapter automatically retries in the case of errors such as timeout or failure to connect.

The format of the list is:

code=actions,(code,code)=actions, ... code=action

The following table lists the types of reply status condition identified by code.

Code	Meaning
E	Error status returned from message handler.
E#statuscode	Error status returned from message handler has status code equal to statuscode.
E*text	Error status returned from message handler contains text string text.
X	There is no reply message object at all.
The following values for action may be used alone or combined to form strings.

Action	Meaning
C	Treat the document as Completed OK.
W	Log a warning but treat the document as Completed OK.
R	Retry the message according to the configured Retry Interval and Failure Timeout settings; finally Fail, unless a different action is also specified. Note that the final status of the message is Completed. (This means that if you need the final status of the message to indicate an error, you should combine this action code with the F action code.)
S	Suspend the message, log an error, and move on to try the next message.
D	Disable the business process or operation, log an error, and restore the outbound message to the front of the business host queue.
When you choose the disable action for a business process, you must configure the business with a Pool Size = 1 or greater if you want all instances of only this business process to stop. If the business process has a Pool Size = 0, the disable action disables all business processes that share the actor pool. See Pool Size and Actor Pool Size.

F	Fail or retry, depending on the Retry property of the business host (which is not exposed as a setting, but which may be set programmatically):
If the Retry property is 0, the F option means that the business host will fail the message with an error and then move on to the next message in its queue.

If the Retry property is 1, the F option means that the business host will retry the message, subject to the configured RetryInterval and FailureTimeout settings; if the retry fails, the business host will fail the message with an error and then move on to the next message in its queue.

For example:

E#6301=R,E*ErrGeneral=R,E=F


The default value for the Reply Code Actions string is E=F

All codes where the actions consists of only W (log a Warning) are evaluated and warnings generated if they trigger. Other codes are evaluated in left-to-right order, executing the first one that triggers that has a non-warning actions value. For example if the reply code action has the value E=RD, the business process or operation first retries to send the message until Failure Timeout setting and then, if the failure continues, it disables the business process or operation.



Failure Timeout
Total number of seconds to keep trying to connect with a destination outside InterSystems IRIS. After this number of seconds has elapsed, the business operation discards the message data and returns an error code. To ensure that no message is ever skipped, enter a Failure Timeout value of –1, which means never time out. Use a setting of –1 when complete data delivery is critical, for example in healthcare applications.

Retry Interval
Number of seconds to wait between attempts to connect with a destination outside InterSystems IRIS.

SendSuperSession
Controls whether to include the SuperSessionID property in the outgoing message; except for HTTP and SOAP, custom coding is also needed. For details, see Supersessions.

Throttle Delay
Common to business services and business operations. Specifies a period of forced idleness before processing the next message, in milliseconds. The default is 0.

For a business service, the delay occurs before each call to the adapter's OnTask() method. For a business operation, the delay occurs before each attempt to dequeue a new message.

This setting does not apply to SOAP services in CSP mode and other services invoked externally via CreateBusinessService(). It applies on a per-job basis so that operations with Pool Size greater than 1 and services with JobPerConnection as true can still generate multiple messages within the interval.

Queue Count Alert
Common to business processes and operations. Specifies an alert threshold for the number of items in the queue of this business host. An alert is triggered when this threshold is exceeded.

InterSystems IRIS sends an alert when the number of items in a business host’s queue reaches the threshold set by this setting for that business host. This alert has the prefix QueueCountAlert: (not localized). This alert is to detect large queues that are building up.

The service that checks the queue count runs every five seconds, so the granularity of the checking is somewhat limited, but should still provide timely warnings about processing and flow problems.

To disable this alert, specify this setting as 0.

For information on alerts, see Configuring Alerts.

Queue Wait Alert
Common to business processes and operations. Specifies the length of time that a message can wait in the business host’s queue or be the active message before an alert is triggered.

This alert has the prefix QueueWaitAlert: (not localized). This alert is useful to detect whether a queue is processing messages.

To disable this alert, specify this setting as 0.

The service that checks the wait periods runs every five seconds, so the granularity of the checking is somewhat limited, but should still provide timely warnings about processing and flow problems.

If a Queue Wait alert has been triggered, then the clearing of the known delay happens when the queue delay time for the item at the head of the queue is less than 80% of the Queue Wait Alert time setting. This is to prevent false re-alerting as a queue is drained. It is possible to change the default 80% with the API: Do ##class(Ens.MonitorService).setQWTPct(0.9)

For information on alerts, see Configuring Alerts.

Alert On Error
Common to all business hosts. When this setting is set to True, as soon as the business host encounters any type of error condition it automatically triggers an alert. An alert writes a message to the Event Log and can also send notification to a user via email or other mechanism. For details, see Configuring Alerts.

Inactivity Timeout
Common to all business hosts. A business host has an Inactive status after it has not received any messages within the number of seconds specified by the Inactivity Timeout field. The production Monitor Service periodically reviews the status of business services and business operations within the production, and marks the item as Inactive if it has not done anything within the Inactivity Timeout period.

The default value is 0 (zero). If this setting is 0, the business host will never be marked Inactive, no matter how long it stands idle.

Foreground
Common to business services and operations. By default, this check box is clear. Select it for debugging or diagnostic purposes only. Jobs in operational systems almost never run in the foreground. When you select the Foreground check box, any system jobs used by the business service run in a Terminal window at the front of the console display. This allows InterSystems IRIS to display debugging or trace messages in that window. See Testing and Debugging Productions.

Log Trace Events
Common to all business hosts. Trace messages are informational text messages that InterSystems IRIS can deliver to the Terminal window (if you select the Foreground check box) and, optionally, to the Event Log. Trace messages are unrelated to Visual Trace, which provides a graphical view of production message objects as they travel through a production.

By default, the Log Trace Events check box is clear. When selected, it enables logging of all trace messages issued by this business host. Logging means that InterSystems IRIS writes the trace messages to the console Terminal window (if your job is running in the foreground) and it also stores copies of these messages in the Event Log.

Archive IO
Common to business services and operations. If True, the adapter associated with this business service or operation logs in the I/O archive each input and output communication it shares with the external system.